fbb.map = function(){
    var checkDom = function(){
        var mapScript = $("#showMap");
        if(mapScript.length){
            prepareGoogleMap(fbb.lat, fbb.lng);
        }
    }

    var mapOptions = {
        center: fbb.mapCenter,
        zoom: 13,
        scrollwheel: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var prepareGoogleMap = function(_lat, _long){
        fbb.mapCenter = new google.maps.LatLng(_lat, _long);
        var service = new google.maps.places.AutocompleteService();
        var geocoder = new google.maps.Geocoder();
        var icon_path = "<%= image_path 'icon/ball_pointer.png' %>";
        var map_canvas = "add_court_map";
        console.log("icon path");
        console.log(icon_path);
        var map = new google.maps.Map(document.getElementById("add_court_map"), mapOptions);
        var marker = new google.maps.Marker({
            icon: icon_path,
            position: fbb.mapCenter,
            map: map
        });
        console.log("should be loaded");
    }


    checkDom();
}