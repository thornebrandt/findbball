fbb.map = function(){
    var mapEl;
    var checkDom = function(){
        var mapScript = $("#showMap");
        if(mapScript.length){
            mapEl = $(".mapEl")[0];
            //prepareGoogleMap(fbb.lat, fbb.lng);
            simpleMap();
        }
    }

    var mapOptions = {
        center: new google.maps.LatLng(fbb.lat, fbb.lng),
        zoom: 13,
        scrollwheel: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var prepareGoogleMap = function(_lat, _long){
        fbb.mapCenter = new google.maps.LatLng(_lat, _long);
        var service = new google.maps.places.AutocompleteService();
        var geocoder = new google.maps.Geocoder();
        var icon_path = "<%= image_path 'icon/ball_pointer.png' %>";
        var map_canvas = "add_court_map";
        var map = new google.maps.Map(document.getElementById("add_court_map"), mapOptions);
        var marker = new google.maps.Marker({
            icon: icon_path,
            position: fbb.mapCenter,
            map: map
        });
        console.log("should be loaded");
    }

    var simpleMap = function(){
        //to test that the map is working
        var map = new google.maps.Map(mapEl, mapOptions);
    }


    checkDom();
}